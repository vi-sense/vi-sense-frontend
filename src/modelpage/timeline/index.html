<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div id="chartWrapper"></div>
    <div>
        <p id="testTimeOutput"></p>
        <input type="button" value="play">
    </div>
</body>
</html>

<style>
html, body{
    margin: 0;
    padding: 0;
    width: 100%;
    height: 80%;
}
html{
    padding: 2%;
    box-sizing: border-box
}
#chartWrapper{
    width: 100%;
    height: 100%;
}
</style>

<script src="https://d3js.org/d3.v5.js"></script>
<script type="module">
/**
 * this file is only for testing porposes 
*/
import Timeline from './Timeline.js'

const API_URL = "https://visense.f4.htw-berlin.de:44344/"

const parent = document.querySelector("#chartWrapper")
const timeline = new Timeline(parent)


fetch(API_URL + `sensors/1/data`)
.catch(error => { console.log(error) })
.then(res => { return res.json() })
.then(json => { timeline.plotGraph(transformData(json), 1) })
//setTimeout(() =>  timeline.removeGraph(1), 2000)

fetch(API_URL + `sensors/2/data`)
.catch(error => { console.log(error) })
.then(res => { return res.json() })
.then(json => { timeline.plotGraph(transformData(json), 2) })  

fetch(API_URL + `sensors/4/data`)
.catch(error => { console.log(error) })
.then(res => { return res.json() })
.then(json => { timeline.plotGraph(transformData(json), 4) })  





let data = []
let start = new Date("2020-01-01T07:55:00Z")
for(let i = 0; i<100; i++){
    var day = new Date(start)
    day.setHours(start.getHours() + i);
    data.push({date: day, value: (i+Math.random())})            
}
timeline.plotGraph(data, 5) 


function transformData(api_data_json){
    let data = []
    for(var d of api_data_json){
        data.push({date: new Date(d.date), value: d.value})        
    }  
    return data
}
</script>
